/*
 Retrieved from https://leaflet.github.io/Leaflet.heat/dist/leaflet-heat.js
 Includes patch to fix weights issue (https://github.com/Leaflet/Leaflet.heat/pull/78)
 */
/*
 (c) 2014, Vladimir Agafonkin
 simpleheat, a tiny JavaScript library for drawing heatmaps with Canvas
 https://github.com/mourner/simpleheat
*/!function(){"use strict";function t(i){return this instanceof t?(this.t=i="string"==typeof i?document.getElementById(i):i,this.i=i.getContext("2d"),this.h=i.width,this.o=i.height,this.u=1,void this.clear()):new t(i)}t.prototype={v:25,L:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(t,i){return this.l=t,this},max:function(t){return this.u=t,this},add:function(t){return this.l.push(t),this},clear:function(){return this.l=[],this},m:function(t,i){i=i||15;var s=this.g=document.createElement("canvas"),h=s.getContext("2d"),n=this.M=t+i;return s.width=s.height=2*n,h.shadowOffsetX=h.shadowOffsetY=200,h.shadowBlur=i,h.shadowColor="black",h.beginPath(),h.arc(n-200,n-200,t,0,2*Math.PI,!0),h.closePath(),h.fill(),this},p:function(t){var i=document.createElement("canvas"),s=i.getContext("2d"),h=s.createLinearGradient(0,0,0,256);for(var n in i.width=1,i.height=256,t)h.addColorStop(n,t[n]);return s.fillStyle=h,s.fillRect(0,0,1,256),this._=s.getImageData(0,0,1,256).data,this},O:function(t){this.g||this.m(this.v),this._||this.p(this.L);var i=this.i;i.clearRect(0,0,this.h,this.o);for(var s,h=0,n=this.l.length;h<n;h++)s=this.l[h],i.globalAlpha=Math.max(s[2]/this.u,t||.05),i.drawImage(this.g,s[0]-this.M,s[1]-this.M);var r=i.getImageData(0,0,this.h,this.o);return this.T(r.data,this._),i.putImageData(r,0,0),this},T:function(t,i){for(var s,h=3,n=t.length;h<n;h+=4)(s=4*t[h])&&(t[h-3]=i[s],t[h-2]=i[1+s],t[h-1]=i[2+s])}},window.simpleheat=t}(),/*
 (c) 2014, Vladimir Agafonkin
 Leaflet.heat, a tiny and fast heatmap plugin for Leaflet.
 https://github.com/Leaflet/Leaflet.heat
*/L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(t,i){this.k=t,L.R(this,i)},A:function(t){return this.k=t,this.C()},G:function(t){return this.k.push(t),this.C()},R:function(t){return L.R(this,t),this.W&&this.Z(),this.C()},C:function(){return this.W&&!this.j&&this.q&&!this.q.B&&(this.j=L.Util.requestAnimFrame(this.D,this)),this},F:function(t){this.q=t,this.t||this.H(),this.options.I?this.J().appendChild(this.t):t.N.K.appendChild(this.t),t.P("moveend",this.S,this),t.options.U&&L.Browser.any3d&&t.P("zoomanim",this.V,this),this.S()},X:function(t){this.options.I?this.J().removeChild(this.t):t.Y().K.removeChild(this.t),t.$("moveend",this.S,this),t.options.U&&t.$("zoomanim",this.V,this)},tt:function(t){return t.it(this),this},H:function(){var t=this.t=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),i=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);t.style[i]="50% 50%";var s=this.q.st();t.width=s.x,t.height=s.y;var h=this.q.options.U&&L.Browser.any3d;L.DomUtil.addClass(t,"leaflet-zoom-"+(h?"animated":"hide")),this.W=simpleheat(t),this.Z()},Z:function(){this.W.m(this.options.m||this.W.v,this.options.blur),this.options.p&&this.W.p(this.options.p)},S:function(){var t=this.q.ht([0,0]);L.DomUtil.setPosition(this.t,t);var i=this.q.st();this.W.h!==i.x&&(this.t.width=this.W.h=i.x),this.W.o!==i.y&&(this.t.height=this.W.o=i.y),this.D()},D:function(){if(this.q){var 
t,i,s,h,n,r,a,e,o=[],u=this.W.M,f=this.q.st(),c=new L.Bounds(L.point([-u,-u]),f.add([u,u])),d=u/2,v=[],l=this.q.nt(),m=l.x%d,w=l.y%d;for(this.u=1,t=0,i=this.k.length;t<i;t++){s=this.q.rt(this.k[t]),n=Math.floor((s.x-m)/d)+2,r=Math.floor((s.y-w)/d)+2;var g=void 0!==this.k[t].alt?this.k[t].alt:void 0!==this.k[t][2]?+this.k[t][2]:1;v[r]=v[r]||[],(h=v[r][n])?(h[0]=(h[0]*h[2]+s.x*g)/(h[2]+g),h[1]=(h[1]*h[2]+s.y*g)/(h[2]+g),h[2]+=g):(h=v[r][n]=[s.x,s.y,g]).et=s,h[2]>this.u&&(this.u=h[2])}for(this.W.max(this.u),t=0,i=v.length;t<i;t++)if(v[t])for(a=0,e=v[t].length;a<e;a++)(h=v[t][a])&&c.contains(h.et)&&o.push([Math.round(h[0]),Math.round(h[1]),Math.min(h[2],this.u)]);this.W.data(o).O(this.options.ot),this.j=null}},V:function(t){var i=this.q.ut(t.zoom),s=this.q.dt(t.vt).ct(-i).ft(this.q.nt());L.DomUtil.setTransform?L.DomUtil.setTransform(this.t,s,i):this.t.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(s)+" scale("+i+")"}}),L.heatLayer=function(t,i){return new L.HeatLayer(t,i)};