/*
* Leaflet Heatmap Overlay
*
* Copyright (c) 2008-2016, Patrick Wied (https://www.patrick-wied.at)
* Dual-licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
* and the Beerware (http://en.wikipedia.org/wiki/Beerware) license.
*/
!function(t,i,s){if("undefined"!=typeof module&&module.exports)module.exports=s(require("heatmap.js"),require("leaflet"));else if("function"==typeof define&&define.amd)define(["heatmap.js","leaflet"],s);else{if(void 0===window.h337)throw new Error("heatmap.js must be loaded before the leaflet heatmap plugin");if(void 0===window.L)throw new Error("Leaflet must be loaded before the leaflet heatmap plugin");i.t=s(window.h337,window.L)}}(0,this,(function(t,i){"use strict";void 0===i.i&&(i.i=i.h);var s=i.i.extend({initialize:function(t){this.o=t,this.l=i.u.create("div","leaflet-zoom-hide"),this.v=[],this.m=1,this.p=0,this.o.M=this.l},g:function(s){var h=s.T();this.j=s,this._=h.x,this.q=h.y,this.l.style.width=h.x+"px",this.l.style.height=h.y+"px",this.l.style.position="absolute",this.D=this.j.k(new i.A(0,0)),s.O().L.appendChild(this.l),this.R||(this.R=t.create(this.o)),s.W("moveend",this.B,this),this.C()},F:function(t){return t.G(this),this},H:function(t){t.O().L.removeChild(this.l),t.I("moveend",this.B,this)},C:function(){if(this.j){var t=this.j.O().K.J;this.l.style[s.N]="translate("+-Math.round(t.x)+"px,"+-Math.round(t.y)+"px)",this.P()}},P:function(){var t,i,s,h={max:this.m,min:this.p,data:[]};if(t=this.j.getBounds(),i=this.j.S(),s=Math.pow(2,i),0!=this.v.length){for(var e=[],a=this.o.U?s:1,n=0,o=0,r=this.o.V,f=this.v.length;f--;){var d=this.v[f],l=d[r],u=d.X;if(t.contains(u)){n=Math.max(l,n),o=Math.min(l,o);var v,m=this.j.Y(u),w={x:Math.round(m.x),y:Math.round(m.y)};w[r]=l,v=d.Z?d.Z*a:(this.o.Z||2)*a,w.Z=v,e.push(w)}}this.o.$&&(h.max=n,h.min=o),h.data=e,this.R.setData(h)}else this.R&&this.R.setData(h)},setData:function(t){this.m=t.max||this.m,this.p=t.min||this.p;for(var s=this.o.tt||"lat",h=this.o.it||"lng",e=this.o.V||"value",a=(t=t.data).length,n=[];a--;){var o=t[a],r={X:new i.st(o[s],o[h])};r[e]=o[e],o.Z&&(r.Z=o.Z),n.push(r)}this.v=n,this.C()},ht:function(t){if(t.length>0)for(var s=t.length;s--;)this.ht(t[s]);else{var h=this.o.tt||"lat",e=this.o.it||"lng",a=this.o.V||"value",n=t,o={X:new i.st(n[h],n[e])};o[a]=n[a],this.m=Math.max(this.m,o[a]),this.p=Math.min(this.p,o[a]),n.Z&&(o.Z=n.Z),this.v.push(o),this.C()}},B:function(){this.D=this.j.k(new i.A(0,0));var t=this.j.T();this._===t.x&&this.q===t.y||(this._=t.x,this.q=t.y,this.l.style.width=this._+"px",this.l.style.height=this.q+"px",this.R.nt.et(this._,this.q)),this.C()}});return s.N=function(){for(var t=document.createElement("div"),i=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],s=0;s<i.length;s++){var h=i[s];if(void 0!==t.style[h])return h}return i[0]}(),s}));