/*
 * heatmap.js v2.0.5 | JavaScript Heatmap Library
 *
 * Copyright 2008-2016 Patrick Wied <heatmapjs@patrick-wied.at> - All rights reserved.
 * Dual licensed under MIT and Beerware license
 *
 * :: 2016-09-05 01:16
 */
!function(t,i,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):i.t=n()}(0,this,(function(){var t={i:40,h:"canvas2d",u:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},o:1,l:0,v:.85,m:"x",g:"y",D:"value",plugins:{}},i=function(){var i=function(t){this.p={},this.M=[],this._=[],this.O=10,this.A=1,this.C=t.R||t.m,this.F=t.V||t.g,this.j=t.G||t.D,t.L&&(this.P=t.L)},n=t.i;return i.prototype={S:function(t,i){var s=t[this.C],h=t[this.F],r=this._,a=this.M,e=this.A,u=this.O,o=t[this.j]||1,f=t.L||this.P||n;a[s]||(a[s]=[],r[s]=[]),a[s][h]?a[s][h]+=o:(a[s][h]=o,r[s][h]=f);var c=a[s][h];return c>e?(i?this.U(c):this.A=c,!1):c<u?(i?this.B(c):this.O=c,!1):{x:s,y:h,value:o,L:f,min:u,max:e}},I:function(){var t=[],i=this.M,n=this._;for(var s in i)for(var h in i[s])t.push({x:s,y:h,L:n[s][h],value:i[s][h]});return{min:this.O,max:this.A,data:t}},X:function(){this.p.Y("extremachange",{min:this.O,max:this.A})},k:function(){if(arguments[0].length>0)for(var t=arguments[0],i=t.length;i--;)this.k.call(this,t[i]);else{var n=this.S(arguments[0],!0);n&&(0===this.M.length&&(this.O=this.A=n.value),this.p.Y("renderpartial",{min:this.O,max:this.A,data:[n]}))}return this},setData:function(t){var i=t.data,n=i.length;this.M=[],this._=[];for(var s=0;s<n;s++)this.S(i[s],!1);return this.A=t.max,this.O=t.min||0,this.X(),this.p.Y("renderall",this.q()),this},H:function(){},U:function(t){return this.A=t,this.X(),this.p.Y("renderall",this.q()),this},B:function(t){return this.O=t,this.X(),this.p.Y("renderall",this.q()),this},J:function(t){this.p=t},q:function(){return{max:this.A,min:this.O,data:this.M,K:this._}},getData:function(){return this.I()}},i}(),n=function(){var t=function(t){var i=t.N||t.u,n=document.createElement("canvas"),s=n.getContext("2d");n.width=256,n.height=1;var h=s.createLinearGradient(0,0,256,1);for(var r in i)h.addColorStop(r,i[r]);return s.fillStyle=h,s.fillRect(0,0,256,1),s.getImageData(0,0,256,1).data},i=function(t,i){var n=document.createElement("canvas"),s=n.getContext("2d"),h=t,r=t;if(n.width=n.height=2*t,1==i)s.beginPath(),s.arc(h,r,t,0,2*Math.PI,!1),s.fillStyle="rgba(0,0,0,1)",s.fill();else{var a=s.createRadialGradient(h,r,t*i,h,r,t);a.addColorStop(0,"rgba(0,0,0,1)"),a.addColorStop(1,"rgba(0,0,0,0)"),s.fillStyle=a,s.fillRect(0,0,2*t,2*t)}return n};function n(i){var n=i.T,s=this.W=document.createElement("canvas"),h=this.canvas=i.canvas||document.createElement("canvas"),r=(this.Z=[1e4,1e4,0,0],getComputedStyle(i.T)||{});h.className="heatmap-canvas",this.$=h.width=s.width=i.width||+r.width.replace(/px/,""),this.tt=h.height=s.height=i.height||+r.height.replace(/px/,""),this.it=s.getContext("2d"),this.nt=h.getContext("2d"),h.style.cssText=s.style.cssText="position:absolute;left:0;top:0;",n.style.position="relative",n.appendChild(h),this.st=t(i),this.ht={},this.rt(i)}return n.prototype={et:function(t){t.data.length>0&&(this.ut(t),this.ot())},ft:function(t){this.ct(),t.data.length>0&&(this.ut(function(t){for(var i=[],n=t.min,s=t.max,h=t.K,r=(t=t.data,Object.keys(t)),a=r.length;a--;)for(var e=r[a],u=Object.keys(t[e]),o=u.length;o--;){var f=u[o],c=t[e][f],d=h[e][f];i.push({x:e,y:f,value:c,L:d})}return{min:n,max:s,data:i}}(t)),this.ot())},dt:function(i){this.st=t(i)},lt:function(t){t.N&&this.dt(t),this.rt(t)},vt:function(t,i){this.$=t,this.tt=i,this.canvas.width=this.W.width=t,this.canvas.height=this.W.height=i},ct:function(){this.it.clearRect(0,0,this.$,this.tt),this.nt.clearRect(0,0,this.$,this.tt)},rt:function(t){this.gt=0==t.blur?0:t.blur||t.v,t.backgroundColor&&(this.canvas.style.backgroundColor=t.backgroundColor),this.$=this.canvas.width=this.W.width=t.width||this.$,this.tt=this.canvas.height=this.W.height=t.height||this.tt,this.xt=255*(t.opacity||0),this.Dt=255*(t.yt||t.o),this.wt=255*(t.bt||t.l),this.Mt=!!t._t},ut:function(t){for(var n=this.O=t.min,s=this.A=t.max,h=(t=t.data||[]).length,r=1-this.gt;h--;){var a,e=t[h],u=e.x,o=e.y,f=e.L,c=Math.min(e.value,s),d=u-f,l=o-f,v=this.it;this.ht[f]?a=this.ht[f]:this.ht[f]=a=i(f,r);var m=(c-n)/(s-n);v.globalAlpha=m<.01?.01:m,v.drawImage(a,d,l),d<this.Z[0]&&(this.Z[0]=d),l<this.Z[1]&&(this.Z[1]=l),d+2*f>this.Z[2]&&(this.Z[2]=d+2*f),l+2*f>this.Z[3]&&(this.Z[3]=l+2*f)}},ot:function(){var t=this.Z[0],i=this.Z[1],n=this.Z[2]-t,s=this.Z[3]-i,h=this.$,r=this.tt,a=this.xt,e=this.Dt,u=this.wt,o=this.Mt;t<0&&(t=0),i<0&&(i=0),t+n>h&&(n=h-t),i+s>r&&(s=r-i);for(var f=this.it.getImageData(t,i,n,s),c=f.data,d=c.length,l=this.st,v=3;v<d;v+=4){var m,g=c[v],x=4*g;if(x)m=a>0?a:g<e?g<u?u:g:e,c[v-3]=l[x],c[v-2]=l[x+1],c[v-1]=l[x+2],c[v]=o?l[x+3]:m}f.data=c,this.nt.putImageData(f,t,i),this.Z=[1e3,1e3,0,0]},Ot:function(t){var i=this.it.getImageData(t.x,t.y,1,1).data[3],n=this.A,s=this.O;return Math.abs(n-s)*(i/255)>>0},At:function(){return this.canvas.toDataURL()}},n}(),s=function(){var i=!1;return"canvas2d"===t.h&&(i=n),i}(),h=function(){for(var t={},i=arguments.length,n=0;n<i;n++){var s=arguments[n];for(var h in s)t[h]=s[h]}return t},r=function(){var n=function(){function t(){this.Ct={}}return t.prototype={Rt:function(t,i,n){var s=this.Ct;s[t]||(s[t]=[]),s[t].push((function(t){return i.call(n,t)}))},Y:function(t,i){var n=this.Ct;if(n[t])for(var s=n[t].length,h=0;h<s;h++){(0,n[t][h])(i)}}},t}(),r=function(t){var i=t.Ft,n=t.p,s=t.Vt;n.Rt("renderpartial",i.et,i),n.Rt("renderall",i.ft,i),n.Rt("extremachange",(function(i){t.zt.jt&&t.zt.jt({min:i.min,max:i.max,N:t.zt.N||t.zt.u})})),s.J(n)};function a(){var a=this.zt=h(t,arguments[0]||{});if(this.p=new n,a.Et){var e=a.Et;if(!t.plugins[e])throw new Error("Plugin '"+e+"' not found. Maybe it was not registered.");var u=t.plugins[e];this.Ft=new u.Gt(a),this.Vt=new u.store(a)}else this.Ft=new s(a),this.Vt=new i(a);r(this)}return a.prototype={k:function(){return this.Vt.k.apply(this.Vt,arguments),this},H:function(){return this.Vt.H&&this.Vt.H.apply(this.Vt,arguments),this},setData:function(){return this.Vt.setData.apply(this.Vt,arguments),this},U:function(){return this.Vt.U.apply(this.Vt,arguments),this},B:function(){return this.Vt.B.apply(this.Vt,arguments),this},Lt:function(t){return this.zt=h(this.zt,t),this.Ft.lt(this.zt),this.p.Y("renderall",this.Vt.q()),this},Pt:function(){return this.p.Y("renderall",this.Vt.q()),this},getData:function(){return this.Vt.getData()},At:function(){return this.Ft.At()},Ot:function(t){return this.Vt.Ot?this.Vt.Ot(t):this.Ft.Ot?this.Ft.Ot(t):null}},a}();return{create:function(t){return new r(t)},register:function(i,n){t.plugins[i]=n}}}));
